{"version":3,"sources":["components/Header/Header.tsx","config.js","services/IssInformationService.tsx","components/ImageWithPlaceholder/ImageWithPlaceholder.tsx","components/Content/IssRouteMap/IssRouteMap.tsx","components/Content/IssSpeed/IssSpeed.tsx","components/Content/Content.tsx","pages/Home/Home.tsx","serviceWorker.js","index.js"],"names":["Header","Navbar","bg","className","NavbarBrand","Component","config","IssInformationService","BASE_API","_informationSubject","_routeMapUrl","this","Subject","fetch","then","response","handleErrors","json","next","catch","error","console","log","message","undefined","ok","Error","statusText","mode","blob","blobImage","URL","createObjectURL","asObservable","ImageWithPlaceholder","props","initialState","src","state","src$","subscribe","setState","Spinner","animation","role","Image","createPlaceholderImage","dimensions","fluid","encodeURIComponent","width","height","renderImage","renderPlaceholder","imageDimensions","RouteMapImage","issInformationService","ISS_INFORMATION_UNAVAILABLE_IMAGE_PATH","_routeMapUrl$","_redirectRouteMapUrl$","routeMapUrl","handleRouteMapUrlUpdate","getRouteMapUrl","receivedRouteMapUrl","Card","IssSpeed","issInformation","averageSpeed","positions","_issInformation$","information","getInformation","toLocaleString","maximumFractionDigits","formatAverageSpeed","renderAverageSpeedNotAvailable","renderAverageSpeed","Content","Container","Row","Col","Home","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a727fbd2.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Navbar, NavbarBrand } from 'react-bootstrap';\nimport './Header.css';\n\nexport default class Header extends Component {\n    render() : JSX.Element {\n        return (\n            <Navbar\n                bg='light'\n                className='d-flex justify-content-center ist-navbar'>\n                <NavbarBrand className='ist-navbar-brand'>ISS Tracker</NavbarBrand>\n            </Navbar>\n        );\n    }\n}\n","const dev = {\n    'backend-base-server': 'http://localhost:8080'\n};\n\nconst prod = {\n    'backend-base-server': 'https://marceloleite2604-iss-tracker.herokuapp.com'\n};\n\nconst config = process.env.REACT_APP_STAGE === 'production' ? prod : dev;\n\nexport default {\n    'api-base-path': '/api/v1',\n    ...config\n};\n","import { Subject, Observable } from 'rxjs';\nimport { IssInformation } from '../model';\nimport config from '../config';\n\nexport default class IssInformationService {\n    readonly BASE_API = config['backend-base-server'] + config['api-base-path'];\n\n    private _informationSubject : Subject<IssInformation>;\n\n    private _routeMapUrl : Subject<string>;\n\n    constructor() {\n        this._informationSubject = new Subject<IssInformation>();\n        this._routeMapUrl = new Subject<string>();\n    }\n\n    get information() : Observable<IssInformation> {\n        return this._informationSubject.asObservable();\n    }\n\n    get routeMapUrl() : Observable<string> {\n        return this._routeMapUrl.asObservable();\n    }\n\n    getInformation() : void {\n        fetch(`${this.BASE_API}/iss-information`)\n            .then(response => {\n                return this.handleErrors(response);\n            })\n            .then(response => response.json())\n            .then((response: IssInformation) => this._informationSubject.next(response))\n            .catch(error => {\n                console.log((error as Error).message);\n                this._informationSubject.next(undefined);\n            });\n    }\n\n    handleErrors(response: Response) : Response {\n        if (!response.ok) {\n            throw Error(response.statusText);\n        }\n        return response;\n    }\n\n    getRouteMapUrl() : void {\n        fetch(`${this.BASE_API}/map`, { mode: 'cors' })\n            .then(response => this.handleErrors(response))\n            .then(response => response.blob())\n            .then(blobImage => this._routeMapUrl.next(URL.createObjectURL(blobImage)))\n            .catch(error => {\n                console.log((error as Error).message);\n                this._routeMapUrl.next(undefined);\n            });\n    }\n}\n","import React, { Component } from 'react';\nimport { Observable } from 'rxjs';\nimport { Spinner, Image } from 'react-bootstrap';\nimport { Dimensions } from '../../model';\nimport './ImageWithPlaceholder.css';\n\ninterface ImageWithPlaceholderProps {\n    src$: Observable<string>\n    dimensions: Dimensions\n}\n\ninterface ImageWithPlaceholderState {\n    src: string\n}\n\nexport default class ImageWithPlaceholder extends Component<ImageWithPlaceholderProps, ImageWithPlaceholderState> {\n    private readonly initialState = {\n        src: ''\n    } as ImageWithPlaceholderState;\n\n    state : ImageWithPlaceholderState;\n\n    props : ImageWithPlaceholderProps;\n\n    constructor(props: ImageWithPlaceholderProps) {\n        super(props);\n        this.props = props;\n        this.state = this.initialState;\n    }\n\n    componentDidMount() : void {\n        this.props.src$.subscribe(src => this.setState({ src }));\n    }\n\n    renderPlaceholder() : JSX.Element {\n        return (\n            <div className='ist-iwp-div'>\n                <Spinner\n                    className='ist-iwp-spinner'\n                    animation=\"border\"\n                    role=\"status\" />\n                <Image\n                    src={this.createPlaceholderImage(this.props.dimensions)}\n                    fluid />\n            </div>\n        );\n    }\n\n    renderImage() : JSX.Element {\n        return (\n            <Image\n                src={this.state.src}\n                fluid />\n        );\n    }\n\n    createPlaceholderImage(dimensions: Dimensions) : string {\n        return 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`\n        <svg \n            width=\"${dimensions.width}\" \n            height=\"${dimensions.height}\" \n            xmlns=\"http://www.w3.org/2000/svg\" \n            viewBox=\"0 0 ${dimensions.width} ${dimensions.height}\" \n            preserveAspectRatio=\"none\">\n            <g>\n                <rect \n                    width=\"${dimensions.width}\" \n                    height=\"${dimensions.height}\"\n                    opacity=\"0.0\" />\n            </g>\n        </svg>\n        `);\n    }\n\n    render() : JSX.Element {\n        if (this.state.src) {\n            return this.renderImage();\n        }\n        return this.renderPlaceholder();\n    }\n}\n","import React, { Component } from 'react';\nimport { Observable, Subject } from 'rxjs';\n\nimport IssInformationService from '../../../services/IssInformationService';\nimport ImageWithPlaceholder from '../../ImageWithPlaceholder/ImageWithPlaceholder';\nimport { Dimensions } from '../../../model';\nimport { Card } from 'react-bootstrap';\n\nconst imageDimensions = {\n    width: 640,\n    height: 421\n} as Dimensions;\n\nexport default class RouteMapImage extends Component {\n    private readonly issInformationService = new IssInformationService();\n\n    private readonly ISS_INFORMATION_UNAVAILABLE_IMAGE_PATH = 'iss-info-unavailable.png';\n\n    private readonly _routeMapUrl$ : Observable<string>;\n\n    private _redirectRouteMapUrl$ : Subject<string>;\n\n    constructor() {\n        super({});\n\n        this._routeMapUrl$ = this.issInformationService.routeMapUrl;\n        this._redirectRouteMapUrl$ = new Subject<string>();\n    }\n\n    componentDidMount() : void {\n        this._routeMapUrl$.subscribe(routeMapUrl => this.handleRouteMapUrlUpdate(routeMapUrl));\n        this.issInformationService.getRouteMapUrl();\n    }\n\n    handleRouteMapUrlUpdate(receivedRouteMapUrl : string) : void {\n        let routeMapUrl = this.ISS_INFORMATION_UNAVAILABLE_IMAGE_PATH;\n        if (receivedRouteMapUrl !== undefined) {\n            routeMapUrl = receivedRouteMapUrl;\n        }\n\n        this._redirectRouteMapUrl$.next(routeMapUrl);\n    }\n\n    render() : JSX.Element {\n        return (\n            <Card>\n                <ImageWithPlaceholder\n                    src$={this._redirectRouteMapUrl$.asObservable()}\n                    dimensions={imageDimensions}/>\n            </Card>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport IssInformationService from '../../../services/IssInformationService';\nimport { IssInformation } from '../../../model';\nimport { Observable } from 'rxjs';\n\ninterface IssSpeedState {\n    issInformation: IssInformation\n}\n\nexport default class IssSpeed extends Component {\n    readonly initialState : IssSpeedState = {\n        issInformation: {\n            averageSpeed: 0,\n            positions: []\n\n        }\n    } as IssSpeedState;\n\n    readonly issInformationService : IssInformationService;\n\n    private readonly _issInformation$ : Observable<IssInformation>;\n\n    state : IssSpeedState;\n\n    constructor() {\n        super({});\n        this.issInformationService = new IssInformationService();\n        this._issInformation$ = this.issInformationService.information;\n        this.state = this.initialState;\n    }\n\n    componentDidMount() : void {\n        this._issInformation$.subscribe(issInformation => this.setState({ issInformation }));\n        this.issInformationService.getInformation();\n    }\n\n    formatAverageSpeed(averageSpeed : number) : string {\n        return averageSpeed.toLocaleString(undefined, { maximumFractionDigits: 2 });\n    }\n\n    renderAverageSpeed() : JSX.Element {\n        return (\n            <p>\n                {`ISS is flying at an astonishing speed of \n                ${this.formatAverageSpeed(this.state.issInformation.averageSpeed)} km/h.`}\n            </p>\n        );\n    }\n\n    renderAverageSpeedNotAvailable() : JSX.Element {\n        return (\n            <p>We are trying to calculate ISS average speed. Please try again in a few minutes.</p>\n        );\n    }\n\n    render() : JSX.Element {\n        if (this.state.issInformation === undefined) {\n            return this.renderAverageSpeedNotAvailable();\n        }\n        return this.renderAverageSpeed();\n    }\n}\n","import React, { Component } from 'react';\n\nimport { Container, Col, Row } from 'react-bootstrap';\n\nimport IssRouteMap from './IssRouteMap/IssRouteMap';\nimport IssSpeed from './IssSpeed/IssSpeed';\nimport './Content.css';\n\nclass Content extends Component {\n    render() : JSX.Element {\n        return (\n            <Container>\n                <Row className='ist-row'>\n                    <Col className='d-flex justify-content-center'>\n                        <IssRouteMap />\n                    </Col>\n                </Row>\n                <Row className='ist-row'>\n                    <Col className='d-flex justify-content-center'>\n                        <IssSpeed />\n                    </Col>\n                </Row>\n            </Container>\n        );\n    }\n}\n\nexport default Content;\n","import React, { Component } from 'react';\n\nimport Header from '../../components/Header/Header';\nimport Content from '../../components/Content/Content';\n\nexport default class Home extends Component {\n    render() : JSX.Element {\n        return (\n            <>\n                <Header />\n                <Content />\n            </>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' }\n    })\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then(registration => {\n                registration.unregister();\n            })\n            .catch(error => {\n                console.error(error.message);\n            });\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Home from './pages/Home/Home';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Home />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}